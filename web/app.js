
class App{
    constructor(){
        this.getData().then(()=>{
            let arr = [0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 0.06978854072160955, 4.1175239025751855, 21.983390327308243, 21.00635075720568, 22.262544490194717, 22.820852815967623, 22.96042989741084, 24.495777793286347, 27.566473585037325, 31.75378602833415, 28.12478191081023, 25.472817363388945, 26.170702770605068, 27.706050666480575, 30.218438132458648, 32.31209435410706, 31.614208946890933, 29.52055272524252, 29.101821480912832, 28.82266731802639, 25.75197152627538, 29.101821480912832, 28.12478191081023, 29.799706888128956, 33.5682880870961, 31.335054784004463, 29.660129806685738, 28.264358992253484, 27.985204829367017, 27.14774234070767, 30.218438132458648, 29.3809756437993, 30.776746458231557, 33.14955684276641, 30.497592295345115, 30.91632353967477, 30.218438132458648, 34.824481820085126, 33.14955684276641, 32.591248516993495, 29.939283969572212, 31.19547770256124, 31.893363109777372, 33.84744224998257, 34.26617349431223, 31.474631865447684, 29.799706888128956, 29.799706888128956, 30.35801521390187, 32.45167143555028, 34.96405890152838, 32.591248516993495, 31.893363109777372, 30.35801521390187, 27.845627747923796, 29.799706888128956, 31.474631865447684, 29.799706888128956]
            let arr2 = [1694606101.842678, 1694606102.6040514, 1694606103.3622754, 1694606104.120565, 1694606104.878801, 1694606105.6369085, 1694606106.3953848, 1694606107.158172, 1694606107.917648, 1694606108.6760652, 1694606109.4345295, 1694606110.1932151, 1694606110.4508646, 1694606110.7086473, 1694606110.966268, 1694606111.224008, 1694606111.4822965, 1694606111.7409449, 1694606111.998713, 1694606112.256343, 1694606112.5246646, 1694606112.7825944, 1694606113.0415132, 1694606113.299255, 1694606113.5581768, 1694606113.8162348, 1694606114.0749516, 1694606114.3339307, 1694606114.5909696, 1694606114.848255, 1694606115.1052234, 1694606115.3620105, 1694606115.6200738, 1694606115.877219, 1694606116.1345859, 1694606116.3914297, 1694606116.6483376, 1694606116.905088, 1694606117.1616108, 1694606117.4184356, 1694606117.6839607, 1694606117.9510813, 1694606118.2170594, 1694606118.4845946, 1694606118.7517552, 1694606119.0187345, 1694606119.2757754, 1694606119.532379, 1694606119.7890959, 1694606120.045526, 1694606120.3022459, 1694606120.5589943, 1694606120.815972, 1694606121.072772, 1694606121.3293183, 1694606121.5860174, 1694606121.8427405, 1694606122.0996826, 1694606122.3564112, 1694606122.6134982, 1694606122.8712313, 1694606123.128421, 1694606123.3861012, 1694606123.643326, 1694606123.9008462, 1694606124.1711297, 1694606124.428134]
            console.log(arr.length)
            console.log(arr2.length)
            console.log(this.data);
            this.drawChart()
        })
        
    }
    
    async getData(){
        await fetch("http://localhost:3030/fetch").then(response =>{
            return response.json();
            }).then(data =>{
                this.data = data;
            });

    }

    drawChart(){
        const chart = document.getElementById('myChart');
        this.lineChart = new Chart(chart, {
                type:'line',
                data: {
                    labels:[this.data[0][1], this.data[1][1], this.data[2][1], this.data[3][1], this.data[4][1], this.data[5][1], this.data[6][1], this.data[7][1], this.data[8][1], this.data[9][1], this.data[10][1],
                    this.data[11][1], this.data[12][1], this.data[13][1], this.data[14][1], this.data[15][1], this.data[16][1], this.data[17][1], this.data[18][1], this.data[19][1], this.data[20][1], this.data[21][1],
                    this.data[22][1], this.data[23][1], this.data[24][1], this.data[25][1], this.data[26][1], this.data[27][1], this.data[28][1], this.data[29][1], this.data[30][1], this.data[31][1], this.data[32][1],
                    this.data[33][1], this.data[34][1], this.data[35][1], this.data[36][1], this.data[37][1], this.data[38][1], this.data[39][1], this.data[40][1], this.data[41][1], this.data[42][1], this.data[43][1],
                    this.data[44][1], this.data[45][1], this.data[46][1], this.data[47][1], this.data[48][1], this.data[49][1], this.data[50][1], this.data[51][1], this.data[52][1], this.data[53][1], this.data[54][1],
                    this.data[55][1], this.data[56][1], this.data[57][1], this.data[58][1], this.data[59][1], this.data[60][1], this.data[61][1], this.data[62][1], this.data[63][1], this.data[64][1], this.data[65][1],
                    this.data[66][1], this.data[67][1],],
                    datasets: [
                        {
                            label:"Moisture Level (%)",
                            data:[this.data[0][0], this.data[1][0], this.data[2][0], this.data[3][0], this.data[4][0], this.data[5][0], this.data[6][0], this.data[7][0], this.data[8][0], this.data[9][0], this.data[10][0],
                            this.data[11][0], this.data[12][0], this.data[13][0], this.data[14][0], this.data[15][0], this.data[16][0], this.data[17][0], this.data[18][0], this.data[19][0], this.data[20][0], this.data[21][0],
                            this.data[22][0], this.data[23][0], this.data[24][0], this.data[25][0], this.data[26][0], this.data[27][0], this.data[28][0], this.data[29][0], this.data[30][0], this.data[31][0], this.data[32][0],
                            this.data[33][0], this.data[34][0], this.data[35][0], this.data[36][0], this.data[37][0], this.data[38][0], this.data[39][0], this.data[40][0], this.data[41][0], this.data[42][0], this.data[43][0],
                            this.data[44][0], this.data[45][0], this.data[46][0], this.data[47][0], this.data[48][0], this.data[49][0], this.data[50][0], this.data[51][0], this.data[52][0], this.data[53][0], this.data[54][0],
                            this.data[55][0], this.data[56][0], this.data[57][0], this.data[58][0], this.data[59][0], this.data[60][0], this.data[61][0], this.data[62][0], this.data[63][0], this.data[64][0], this.data[65][0],
                            this.data[66][0], this.data[67][0],
                            ]
                        }
                    ]
                }
            }
            );
    }
}

let app = new App();